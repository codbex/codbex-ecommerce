<?xml version='1.0' encoding='UTF-8'?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.flowable.org/processdef" exporter="Flowable Open Source Modeler" exporterVersion="6.8.1">
  <process id="checkout-process" name="Checkout Process" isExecutable="true">
    <startEvent id="start-event"/>
    <serviceTask id="create-order" name="Create Order" flowable:async="true" flowable:delegateExpression="${JSTask}">
      <extensionElements>
        <flowable:field name="handler">
          <flowable:string><![CDATA[codbex-ecommerce/tasks/checkout-process/create-order.ts]]></flowable:string>
        </flowable:field>
      </extensionElements>
    </serviceTask>
    <endEvent id="end-event"/>
    <sequenceFlow id="sid-2469AB8B-B088-4DD5-8714-7501E28746F6" sourceRef="start-event" targetRef="create-order"/>
    <userTask id="review-order" name="Review Order" flowable:async="true" flowable:candidateGroups="ADMINISTRATOR" flowable:formKey="/services/web/codbex-ecommerce/forms/review-order/index.html"/>
    <sequenceFlow id="sid-C36509FF-3EAB-4664-8B35-9BB38B005BD6" sourceRef="create-order" targetRef="review-order"/>
    <exclusiveGateway id="sid-A8EBEABC-7F98-46CB-BF40-24A6B6BADCD8" flowable:async="true" default="sid-B0148703-C303-4217-AD5E-01638ABA4622"/>
    <userTask id="ship-order" name="Ship Order" flowable:async="true" flowable:candidateGroups="ADMINISTRATOR" flowable:formKey="/services/web/codbex-ecommerce/forms/ship-order/index.html"/>
    <serviceTask id="reject-order" name="Reject Order" flowable:async="true" flowable:delegateExpression="${JSTask}">
      <extensionElements>
        <flowable:field name="handler">
          <flowable:string><![CDATA[codbex-ecommerce/tasks/checkout-process/reject-order.js]]></flowable:string>
        </flowable:field>
      </extensionElements>
    </serviceTask>
    <sequenceFlow id="sid-0A1470E1-9748-4B60-8A4B-8AA6EC56D2B9" sourceRef="review-order" targetRef="sid-A8EBEABC-7F98-46CB-BF40-24A6B6BADCD8"/>
    <serviceTask id="send-reject-email" name="Send Reject Email" flowable:async="true" flowable:delegateExpression="${JSTask}">
      <extensionElements>
        <flowable:field name="handler">
          <flowable:string><![CDATA[codbex-ecommerce/tasks/checkout-process/send-reject-email.js]]></flowable:string>
        </flowable:field>
      </extensionElements>
    </serviceTask>
    <sequenceFlow id="sid-7CAF3576-C5BE-4D04-B2A4-4DCB9BB959DA" sourceRef="reject-order" targetRef="send-reject-email"/>
    <sequenceFlow id="sid-036AEEF3-D461-4523-978F-38C68C3EDC00" sourceRef="send-reject-email" targetRef="end-event"/>
    <sequenceFlow id="sid-B0148703-C303-4217-AD5E-01638ABA4622" sourceRef="sid-A8EBEABC-7F98-46CB-BF40-24A6B6BADCD8" targetRef="reject-order"/>
    <serviceTask id="send-approve-email" name="Send Approve Email" flowable:async="true" flowable:delegateExpression="${JSTask}">
      <extensionElements>
        <flowable:field name="handler">
          <flowable:string><![CDATA[codbex-ecommerce/tasks/checkout-process/send-approve-email.js]]></flowable:string>
        </flowable:field>
      </extensionElements>
    </serviceTask>
    <sequenceFlow id="sid-89B6C088-862B-4B95-91E8-EB3248B5D62C" sourceRef="send-approve-email" targetRef="ship-order"/>
    <serviceTask id="send-ship-email" name="Send Ship Email" flowable:async="true" flowable:delegateExpression="${JSTask}">
      <extensionElements>
        <flowable:field name="handler">
          <flowable:string><![CDATA[codbex-ecommerce/tasks/checkout-process/send-ship-email.js]]></flowable:string>
        </flowable:field>
      </extensionElements>
    </serviceTask>
    <sequenceFlow id="sid-CA1E423F-327E-4D1A-A11A-06E4BE1F5CD3" sourceRef="ship-order" targetRef="send-ship-email"/>
    <userTask id="finish-order" name="Finish Order" flowable:async="true" flowable:candidateGroups="ADMINISTRATOR" flowable:formKey="/services/web/codbex-ecommerce/forms/finish-order/index.html"/>
    <sequenceFlow id="sid-D552666B-6574-48A9-9A79-FF6600D57E54" sourceRef="send-ship-email" targetRef="finish-order"/>
    <exclusiveGateway id="sid-CCAF2B8E-9EF2-4856-92F6-95E47CFB8202" flowable:async="true" default="sid-4C10133C-57AE-40F7-891C-BC71B3C6189C"/>
    <sequenceFlow id="sid-F7BDE914-F27A-4E1A-A8B5-C4ED0DB34694" sourceRef="finish-order" targetRef="sid-CCAF2B8E-9EF2-4856-92F6-95E47CFB8202"/>
    <serviceTask id="paid-order" name="Paid Order" flowable:async="true" flowable:delegateExpression="${JSTask}">
      <extensionElements>
        <flowable:field name="handler">
          <flowable:string><![CDATA[codbex-ecommerce/tasks/checkout-process/paid-order.js]]></flowable:string>
        </flowable:field>
      </extensionElements>
    </serviceTask>
    <sequenceFlow id="sid-4C10133C-57AE-40F7-891C-BC71B3C6189C" sourceRef="sid-CCAF2B8E-9EF2-4856-92F6-95E47CFB8202" targetRef="paid-order"/>
    <serviceTask id="send-paid-email" name="Send Paid Email" flowable:async="true" flowable:delegateExpression="${JSTask}">
      <extensionElements>
        <flowable:field name="handler">
          <flowable:string><![CDATA[codbex-ecommerce/tasks/checkout-process/send-paid-email.js]]></flowable:string>
        </flowable:field>
      </extensionElements>
    </serviceTask>
    <sequenceFlow id="sid-69B50F79-3628-44DC-9503-444E0CEF7D5C" sourceRef="send-paid-email" targetRef="end-event"/>
    <sequenceFlow id="sid-E4725863-A06A-44AE-B261-3F98F4F2A905" sourceRef="paid-order" targetRef="send-paid-email"/>
    <serviceTask id="returned-order" name="Returned Order" flowable:async="true" flowable:delegateExpression="${JSTask}">
      <extensionElements>
        <flowable:field name="handler">
          <flowable:string><![CDATA[codbex-ecommerce/tasks/checkout-process/returned-order.js]]></flowable:string>
        </flowable:field>
      </extensionElements>
    </serviceTask>
    <sequenceFlow id="sid-067E1F93-138D-4F2E-8505-EE2E808C9E9C" sourceRef="sid-A8EBEABC-7F98-46CB-BF40-24A6B6BADCD8" targetRef="send-approve-email">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${ status == "Approved" }]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-795BD3F3-6643-4763-9EE5-8B6A624BB054" sourceRef="sid-CCAF2B8E-9EF2-4856-92F6-95E47CFB8202" targetRef="returned-order">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${ state == "Returned" }]]></conditionExpression>
    </sequenceFlow>
    <serviceTask id="send-returned-email" name="Send Returned Email" flowable:async="true" flowable:delegateExpression="${JSTask}">
      <extensionElements>
        <flowable:field name="handler">
          <flowable:string><![CDATA[codbex-ecommerce/tasks/checkout-process/send-returned-email.js]]></flowable:string>
        </flowable:field>
      </extensionElements>
    </serviceTask>
    <sequenceFlow id="sid-0ACE3AF3-585D-4369-A83D-EACC3304FE56" sourceRef="returned-order" targetRef="send-returned-email"/>
    <sequenceFlow id="sid-19CD8EF0-2805-464C-91B7-B6D6490285D7" sourceRef="send-returned-email" targetRef="end-event"/>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_checkout-process">
    <bpmndi:BPMNPlane bpmnElement="checkout-process" id="BPMNPlane_checkout-process">
      <bpmndi:BPMNShape bpmnElement="start-event" id="BPMNShape_start-event">
        <omgdc:Bounds height="30.0" width="30.0" x="90.0" y="78.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="create-order" id="BPMNShape_create-order">
        <omgdc:Bounds height="80.0" width="100.0" x="195.0" y="53.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="end-event" id="BPMNShape_end-event">
        <omgdc:Bounds height="28.0" width="28.0" x="855.0" y="1039.9000244140625"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="review-order" id="BPMNShape_review-order">
        <omgdc:Bounds height="80.0" width="100.0" x="375.0" y="53.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-A8EBEABC-7F98-46CB-BF40-24A6B6BADCD8" id="BPMNShape_sid-A8EBEABC-7F98-46CB-BF40-24A6B6BADCD8">
        <omgdc:Bounds height="40.0" width="40.0" x="405.0" y="195.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="ship-order" id="BPMNShape_ship-order">
        <omgdc:Bounds height="80.0" width="100.0" x="375.0" y="405.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="reject-order" id="BPMNShape_reject-order">
        <omgdc:Bounds height="80.0" width="100.0" x="510.0" y="175.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="send-reject-email" id="BPMNShape_send-reject-email">
        <omgdc:Bounds height="80.0" width="100.0" x="663.0" y="175.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="send-approve-email" id="BPMNShape_send-approve-email">
        <omgdc:Bounds height="80.0" width="100.0" x="375.0" y="285.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="send-ship-email" id="BPMNShape_send-ship-email">
        <omgdc:Bounds height="80.0" width="100.0" x="376.20001220703125" y="525.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="finish-order" id="BPMNShape_finish-order">
        <omgdc:Bounds height="80.0" width="100.0" x="375.0" y="650.3999938964844"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-CCAF2B8E-9EF2-4856-92F6-95E47CFB8202" id="BPMNShape_sid-CCAF2B8E-9EF2-4856-92F6-95E47CFB8202">
        <omgdc:Bounds height="40.0" width="40.0" x="405.0" y="780.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="paid-order" id="BPMNShape_paid-order">
        <omgdc:Bounds height="80.0" width="100.0" x="510.0" y="760.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="send-paid-email" id="BPMNShape_send-paid-email">
        <omgdc:Bounds height="80.0" width="100.0" x="675.0" y="760.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="returned-order" id="BPMNShape_returned-order">
        <omgdc:Bounds height="80.0" width="100.0" x="376.20001220703125" y="870.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="send-returned-email" id="BPMNShape_send-returned-email">
        <omgdc:Bounds height="80.0" width="100.0" x="375.0" y="1013.9000244140625"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-19CD8EF0-2805-464C-91B7-B6D6490285D7" id="BPMNEdge_sid-19CD8EF0-2805-464C-91B7-B6D6490285D7" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="14.0" flowable:targetDockerY="14.0">
        <omgdi:waypoint x="474.95000000000005" y="1053.9000244140625"/>
        <omgdi:waypoint x="855.0" y="1053.9000244140625"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-4C10133C-57AE-40F7-891C-BC71B3C6189C" id="BPMNEdge_sid-4C10133C-57AE-40F7-891C-BC71B3C6189C" flowable:sourceDockerX="20.5" flowable:sourceDockerY="20.5" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="444.5135906040269" y="800.429104477612"/>
        <omgdi:waypoint x="509.9999999999781" y="800.185687732342"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-795BD3F3-6643-4763-9EE5-8B6A624BB054" id="BPMNEdge_sid-795BD3F3-6643-4763-9EE5-8B6A624BB054" flowable:sourceDockerX="20.5" flowable:sourceDockerY="20.5" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="425.6203741366046" y="819.3211447892085"/>
        <omgdi:waypoint x="425.94429998528466" y="870.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-89B6C088-862B-4B95-91E8-EB3248B5D62C" id="BPMNEdge_sid-89B6C088-862B-4B95-91E8-EB3248B5D62C" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="425.0" y="364.95000000000005"/>
        <omgdi:waypoint x="425.0" y="405.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-C36509FF-3EAB-4664-8B35-9BB38B005BD6" id="BPMNEdge_sid-C36509FF-3EAB-4664-8B35-9BB38B005BD6" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="294.95000000000005" y="93.0"/>
        <omgdi:waypoint x="375.0" y="93.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-69B50F79-3628-44DC-9503-444E0CEF7D5C" id="BPMNEdge_sid-69B50F79-3628-44DC-9503-444E0CEF7D5C" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="14.0" flowable:targetDockerY="14.0">
        <omgdi:waypoint x="774.9499999997118" y="800.0"/>
        <omgdi:waypoint x="869.0" y="800.0"/>
        <omgdi:waypoint x="869.0" y="1039.9000244140625"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-0A1470E1-9748-4B60-8A4B-8AA6EC56D2B9" id="BPMNEdge_sid-0A1470E1-9748-4B60-8A4B-8AA6EC56D2B9" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="20.0" flowable:targetDockerY="20.0">
        <omgdi:waypoint x="425.0" y="132.95"/>
        <omgdi:waypoint x="425.0" y="195.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-F7BDE914-F27A-4E1A-A8B5-C4ED0DB34694" id="BPMNEdge_sid-F7BDE914-F27A-4E1A-A8B5-C4ED0DB34694" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="20.0" flowable:targetDockerY="20.0">
        <omgdi:waypoint x="425.0" y="730.3499938964843"/>
        <omgdi:waypoint x="425.0" y="780.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-E4725863-A06A-44AE-B261-3F98F4F2A905" id="BPMNEdge_sid-E4725863-A06A-44AE-B261-3F98F4F2A905" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="609.95" y="800.0"/>
        <omgdi:waypoint x="675.0" y="800.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-7CAF3576-C5BE-4D04-B2A4-4DCB9BB959DA" id="BPMNEdge_sid-7CAF3576-C5BE-4D04-B2A4-4DCB9BB959DA" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="609.949999999984" y="215.0"/>
        <omgdi:waypoint x="663.0" y="215.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-D552666B-6574-48A9-9A79-FF6600D57E54" id="BPMNEdge_sid-D552666B-6574-48A9-9A79-FF6600D57E54" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="425.81723317499336" y="604.9499999999999"/>
        <omgdi:waypoint x="425.38230055824783" y="650.3999938964844"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-0ACE3AF3-585D-4369-A83D-EACC3304FE56" id="BPMNEdge_sid-0ACE3AF3-585D-4369-A83D-EACC3304FE56" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="425.8664438947485" y="949.9499999999999"/>
        <omgdi:waypoint x="425.3331513518924" y="1013.9000244140625"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-B0148703-C303-4217-AD5E-01638ABA4622" id="BPMNEdge_sid-B0148703-C303-4217-AD5E-01638ABA4622" flowable:sourceDockerX="20.5" flowable:sourceDockerY="20.5" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="444.5135906040263" y="215.42910447761196"/>
        <omgdi:waypoint x="509.9999999999908" y="215.185687732342"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-CA1E423F-327E-4D1A-A11A-06E4BE1F5CD3" id="BPMNEdge_sid-CA1E423F-327E-4D1A-A11A-06E4BE1F5CD3" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="425.39950406392416" y="484.95000000000005"/>
        <omgdi:waypoint x="425.8000081380208" y="525.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-2469AB8B-B088-4DD5-8714-7501E28746F6" id="BPMNEdge_sid-2469AB8B-B088-4DD5-8714-7501E28746F6" flowable:sourceDockerX="15.0" flowable:sourceDockerY="15.0" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="119.94999906759469" y="93.0"/>
        <omgdi:waypoint x="195.0" y="93.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-036AEEF3-D461-4523-978F-38C68C3EDC00" id="BPMNEdge_sid-036AEEF3-D461-4523-978F-38C68C3EDC00" flowable:sourceDockerX="50.0" flowable:sourceDockerY="40.0" flowable:targetDockerX="14.0" flowable:targetDockerY="14.0">
        <omgdi:waypoint x="762.9499999999999" y="215.0"/>
        <omgdi:waypoint x="869.0" y="215.0"/>
        <omgdi:waypoint x="869.0" y="1039.9000244140625"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-067E1F93-138D-4F2E-8505-EE2E808C9E9C" id="BPMNEdge_sid-067E1F93-138D-4F2E-8505-EE2E808C9E9C" flowable:sourceDockerX="20.5" flowable:sourceDockerY="20.5" flowable:targetDockerX="50.0" flowable:targetDockerY="40.0">
        <omgdi:waypoint x="425.41284403669727" y="234.52816223648028"/>
        <omgdi:waypoint x="425.1824200913242" y="285.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>